<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mafia Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    color: #333;
  }
  .container {
    width: 90%;
    max-width: 400px;
    text-align: center;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
  }
  h2 {
    margin-bottom: 15px;
  }
  input, button, select {
    padding: 10px;
    font-size: 16px;
    margin: 6px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    border: none;
    cursor: pointer;
  }
  #startBtn {
    background-color: #4CAF50;
    color: white;
  }
  #nextBtn {
    background-color: #007BFF;
    color: white;
  }
  #footer {
    font-size: 12px;
    color: #555;
    margin-top: 15px;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Mafia Setup</h2>
  <div id="setup">
    <p>Enter player names (one per line):</p>
    <textarea id="playerNames" rows="6" style="width:100%;"></textarea>
    <p>Select number of Mafia:</p>
    <select id="mafiaCount">
      <option>1</option>
      <option>2</option>
      <option>3</option>
    </select>
    <p>Special roles:</p>
    <label><input type="checkbox" id="doctor"> Doctor</label><br>
    <label><input type="checkbox" id="detective"> Detective</label><br>
    <button id="startBtn">Assign Roles</button>
  </div>

  <div id="game" style="display:none;">
    <h3 id="gameTitle">Role Reveal</h3>
    <p id="instructions">Pass the phone. Tap to reveal your role.</p>
    <button id="nextBtn">Reveal Next</button>
    <div id="roleDisplay" style="margin-top:20px; font-size:20px; font-weight:bold;"></div>
  </div>

  <div id="footer">App by Evan</div>
</div>

<script>
let players = [];
let roles = [];
let currentIndex = 0;

document.getElementById("startBtn").onclick = function() {
  const names = document.getElementById("playerNames").value.trim().split("\n").filter(n => n);
  const mafiaCount = parseInt(document.getElementById("mafiaCount").value);
  const doctor = document.getElementById("doctor").checked;
  const detective = document.getElementById("detective").checked;

  if (names.length < mafiaCount + (doctor?1:0) + (detective?1:0) + 1) {
    alert("Not enough players for these roles!");
    return;
  }

  players = names;
  roles = Array(mafiaCount).fill("Mafia");

  if (doctor) roles.push("Doctor");
  if (detective) roles.push("Detective");

  while (roles.length < names.length) roles.push("Villager");

  // shuffle roles
  roles = roles.sort(() => Math.random() - 0.5);

  document.getElementById("setup").style.display = "none";
  document.getElementById("game").style.display = "block";
};

document.getElementById("nextBtn").onclick = function() {
  if (currentIndex < players.length) {
    let player = players[currentIndex];
    let role = roles[currentIndex];
    document.getElementById("roleDisplay").textContent = player + ": " + role;
    currentIndex++;
  } else {
    document.getElementById("roleDisplay").textContent = "All roles assigned! Start the game.";
    document.getElementById("instructions").textContent = "Play Mafia rounds manually now.";
    document.getElementById("nextBtn").style.display = "none";
  }
};
</script>

</body>
</html>
